m4_define(`m4_post_date', `2010-09-07')m4_dnl
m4_define(`m4_post_title', `Protecting Your Privacy on Linux')m4_dnl
m4_include(`posttrans.m4')m4_dnl
m4_begin_post
<p>
Some times you need to protect your documents containing sensitive information from prying eyes. Simply enforcing access-control on a document (e.g. "<code>chmod 600 foobar</code>") is not enough in such cases as it can still be read by those with super-user access or with physical access to your storage media (e.g. when your laptop gets stolen or you misplace your backup media). It is also ineffective when you use on-line back-up solutions like <a href="http://skydrive.live.com/">SkyDrive</a>, <a href="http://docs.google.com/">Google Docs</a> or <a href="http://www.dropbox.com/">Dropbox</a>. Fortunately Linux provides several tools to help you here depending on your needs.
m4_begin_post_rest
<p>
<p>(<b>DISCLAIMER:</b> I am <i>not</i> a cryptographer. Consult one if you need to be sure of the security of these methods.)<br /><p>If you use the text-editor <a href="http://www.vim.org/">Vim</a>, you can encrypt your files by invoking Vim with the "<code>-x</code>" command-line option (e.g. "<code>vim -x diary.txt</code>"). You can alternatively encrypt a file while editing it by typing "<code>:X</code>" in command-mode. Vim will ask you (twice) to enter a password that will be used to encrypt the file. When you open such an encrypted file for editing, Vim will prompt you to enter a password to unlock it. You can find more details about this feature <a href="http://vimdoc.sourceforge.net/htmldoc/editing.html#encryption">here</a>.<br /><p>Note that the default encryption-method used by Vim is not very secure and <a href="http://zeus.phys.uconn.edu/refs/crackers/">can be broken by a determined person</a>. With Vim 7.3, you have the option of choosing a stronger method based on <a href="http://en.wikipedia.org/wiki/Blowfish_%28cipher%29">the Blowfish cipher</a> using "<code>:set cryptmethod=1</code>" in command-mode (or by setting it in your "<code>.vimrc</code>" file).<br /><p>If you use <a href="http://www.openoffice.org/">OpenOffice.org</a>, securing your document is as simple as choosing the "Save with password" option in the save dialogue-box. More details of the method used by OpenOffice.org to encrypt the document can be found <a href="http://wiki.services.openoffice.org/wiki/Security/Encryption#Enhancing_the_Encryption_Specification_for_ODF_1.2">here</a>.<br /><p>If you prefer a stronger method or if your documents have been created by an application that doesn't natively support encryption, you can use the "<code>openssl</code>" command-line tool. For example, to encrypt a file named "<code>foo</code>" using <a href="http://en.wikipedia.org/wiki/Advanced_Encryption_Standard">AES-256</a> and store the result in a file named "<code>foo.enc</code>", you can use:<br /><pre>  openssl enc -aes-256-cbc -e -salt -in foo -out foo.enc<br /></pre>To decrypt the encrypted file and store the result in a file named "<code>bar</code>", you can use:<br /><pre>  openssl enc -aes-256-cbc -d -in foo.enc -out bar<br /></pre>(<b>Quick Tips:</b> Compress your files before encrypting them; never omit a <a href="http://en.wikipedia.org/wiki/Salt_%28cryptography%29">salt</a>; do not use <a href="http://en.wikipedia.org/wiki/Block_cipher_modes_of_operation#Electronic_codebook_.28ECB.29">ECB</a>. See also: "<a href="http://www.bsdcan.org/2010/schedule/events/183.en.html">Everything You Need To Know About Cryptography in One Hour</a>".)<br /><p>You can alternatively use <a href="http://www.gnupg.org/">GNU Privacy Guard</a> and <a href="http://mcrypt.sourceforge.net/">mcrypt</a>, but they are not significantly better than "<code>openssl</code>" for this purpose, except perhaps in usability. <a href="http://bcrypt.sourceforge.net/">bcrypt</a> and <a href="http://www.tarsnap.com/scrypt.html">scrypt</a> are stronger file-encryption tools, though the latter is relatively new and has not been vetted thoroughly by experts yet.<br /><p>If you are paranoid, you can hide your sensitive information among innocuous data in such a way that a malicious person would not even know of its existence. This is known as <a href="http://en.wikipedia.org/wiki/Steganography">steganography</a>. For example, this image of <a href="http://en.wikipedia.org/wiki/The_Milkmaid_%28Vermeer%29">The Milkmaid</a>:<br /><p><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://3.bp.blogspot.com/_glrEiI4xsDc/TIUxtqxVHyI/AAAAAAAAA7U/D5WvQcclRks/s1600/verm_mm.jpg" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" src="http://3.bp.blogspot.com/_glrEiI4xsDc/TIUxtqxVHyI/AAAAAAAAA7U/D5WvQcclRks/s320/verm_mm.jpg" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">"The Milkmaid" by Johannes Vermeer</td></tr></tbody></table>
<p>
looks visually-indistinguishable from this image:<br /><p><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://2.bp.blogspot.com/_glrEiI4xsDc/TIUyDccFm8I/AAAAAAAAA7c/rJRiiUYTkW8/s1600/mmenc.jpg" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" src="http://2.bp.blogspot.com/_glrEiI4xsDc/TIUyDccFm8I/AAAAAAAAA7c/rJRiiUYTkW8/s320/mmenc.jpg" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">The Same Painting, Now With a Message</td></tr></tbody></table>
<p>
and yet the latter contains the complete (compressed and encrypted) text of the <a href="http://en.wikipedia.org/wiki/Declaration_of_the_Rights_of_Man_and_of_the_Citizen">Declaration of the Rights of Man and of the Citizen</a>. It was created using <a href="http://steghide.sourceforge.net/">steghide</a> like this:<br /><pre>  steghide embed -z 9 -e twofish cbc -ef rights.txt \<br />    -cf verm_mm.jpg -sf mmenc.jpg<br /></pre>The password is "<a href="http://translate.google.com/#fr%7Cen%7CLe%20Roi%20Est%20Mort">leroiestmort</a>" should you wish to extract the document like this:<br /><pre>  steghide extract -sf mmenc.jpg<br /></pre>"<code>steghide</code>" is a tool that works very well for its intended purpose. Other such tools include <a href="http://www.outguess.org/">OutGuess</a> and <a href="http://linux01.gwdg.de/%7Ealatham/stego.html">JPHIDE</a>, though they require modifications to <a href="http://en.wikipedia.org/wiki/Libjpeg">libjpeg</a> unlike "<code>steghide</code>". Unfortunately "<code>steghide</code>" has not been under active development for over five years now and the other tools don't fare any better in this regard either. (Note that if you <i>do</i> intend to compile "<code>steghide</code>" yourself on a modern Linux system, you would need to apply <a href="http://pastebin.com/me89rxzY">a patch like this</a> for the 0.5.1 release to be able to compile it.)<br /><p>If you are even more paranoid, you can use <a href="http://en.wikipedia.org/wiki/TrueCrypt">TrueCrypt</a> for encrypting a partition on a disc or for creating an encrypted virtual disc within a file. Alternatively you can use <a href="http://en.wikipedia.org/wiki/Dm-crypt">dm-crypt</a> with <a href="http://en.wikipedia.org/wiki/Linux_Unified_Key_Setup">LUKS</a> on a modern Linux system to encrypt a partition on a disc. Markus Gattol has published "<a href="http://www.markus-gattol.name/ws/dm-crypt_luks.html">Full-disk Encryption</a>" as a guide to implementing this option. You can use <a href="http://en.wikipedia.org/wiki/FreeOTFE">FreeOTFE</a> to access such disc-partitions from Windows. Note that even with full-disc encryption, you still have to use the other tools when storing sensitive data on on-line backup sites or on unsupported off-line backup media.<br /><p>Finally, after all is said and done, don't forget <a href="http://xkcd.com/538/">xkcd-538</a>. <tt>;-)</tt><br /><p><b>Update (2010-09-10):</b> Pointed to dm-crypt/LUKS based on feedback from <a href="http://www.reddit.com/r/linux/comments/dbhvs/protecting_your_privacy_on_linux/">the corresponding reddit post</a>.
<p>
(<a href="http://rmathew.blogspot.com/2010/09/protecting-your-privacy-on-linux.html">Originally posted on Blogspot</a>.)
m4_end_post_rest
m4_end_post
